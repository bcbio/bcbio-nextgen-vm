os: linux
dist: bionic
language: generic

before_install:
  - wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
  - bash Miniconda3-latest-Linux-x86_64.sh -b -p ~/bcbio-vm/anaconda
  - export PATH=~/bcbio-vm/anaconda/bin:$PATH

install: conda install --yes -c conda-forge -c bioconda bcbio-nextgen bcbio-nextgen-vm

jobs:
  include:
    - script: pytest -p no:cacheprovider -p no:stepwise -s -v tests/test_cwl.py::test_cwl_docker_somatic_workflow
      name: "Variant CWL"
    - script: pytest -p no:cacheprovider -p no:stepwise -s -v tests/test_cwl.py::test_cwl_rnaseq
      name: "RNA-seq CWL"
